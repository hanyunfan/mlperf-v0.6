#!/bin/bash

## System run parms
DGXNNODES=1
DGXSYSTEM=$(basename $(readlink -f ${BASH_SOURCE[0]}) | sed 's/^config_//' | sed 's/\.sh$//' )
WALLTIME=5:00:00

## DL params
LR=${LR:-"2.0e-3"}
#LR=${LR:-"4.0e-3"}
TRAIN_BATCH_SIZE=${TRAIN_BATCH_SIZE:-768}
#TRAIN_BATCH_SIZE=${TRAIN_BATCH_SIZE:-256}
TEST_BATCH_SIZE=${TEST_BATCH_SIZE:-128}
WARMUP_STEPS=${WARMUP_STEPS:-200}
#REMAIN_STEPS=${REMAIN_STEPS:-6453}
#REMAIN_STEPS=${REMAIN_STEPS:-5669}
REMAIN_STEPS=${REMAIN_STEPS:-5270}
#REMAIN_STEPS=${REMAIN_STEPS:-4300}
DECAY_INTERVAL=${DECAY_INTERVAL:-720}
TARGET=${TARGET:-24.0}
MAX_SEQ_LEN=${MAX_SEQ_LEN:-75}
NUMEPOCHS=${NUMEPOCHS:-5}
MATH=${MATH:-amp_fp16}
EXTRA_OPTS=${EXTRA_OPTS-"\
   --fused-attention \
   --fused-xentropy \
   --no-log-all-ranks \
   "}

## System config params
DGXNGPU=3
#DGXNGPU=8
DGXSOCKETCORES=32
DGXHT=1 	# HT is on is 2, HT off is 1
DGXIBDEVICES=''
DGXNSOCKET=2
BIND_LAUNCH=0
